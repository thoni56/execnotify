#!/bin/bash
#======================================================================
# execnotify - https://github.com/thoni56/execnotify
#

if [ $# -eq 0 ]; then
    echo "usage: execnotify <command>"
    exit 1
fi

# Set default icons
start_icon=/tmp/icon-start.png
pass_icon=/tmp/icon-pass.png
fail_icon=/tmp/icon-fail.png

# Set up notifications
notify_start='terminal-notifier -group execnotify -title Unittests -message "Starting..." -contentImage $start_icon'
notify_pass='terminal-notifier -remove execnotify -title Unittests -message "Passed" -contentImage $pass_icon'
notify_fail='terminal-notifier -remove execnotify -title Unittests -message "Failed" -contentImage $fail_icon'

# Look for user settings where you can override notification commands for
# - notify_start
# - notify_pass
# - notify_fail

# TODO: look upwards in the file tree to find them to allow local settings
if [ -f ~/.execnotifyrc ]; then
    echo "Reading ~/.execnotifyrc..."
    . ~/.execnotifyrc
fi

# Create icons
if ! [ -f /tmp/icon-start.png ] ; then
    base64 -d > /tmp/icon-start.png <<EOF
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
EOF
fi

if ! [ -f /tmp/icon-pass.png ] ; then
    base64 -d > /tmp/icon-pass.png <<EOF
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADlklEQVRoQ+2Zv04bMRzHv25hboYO
nVrYujV0rtSwVU0GX16gvEHTJyA8AfAG9AU4IyVVN4LUGcLGBmVi6EDnAr/qd5zR3eXubN85B0hY
QkKKz/58/fvjn22BR97EI+fHkwBtwc+hbD8DPgLoAGgR0BJAm38nYCqAS9z+TW6Agx+Bmvqwfi0L
fArl0nPgKwApgCUXIALOAKhrYPtnoPj/Sq2SgBh8XQBrlWbNfETAzjWwUUWIs4BuKDcFMPABnjPG
cBSoDZexrQXIULb+Afvar10mcenL8bIIrKpAcbwYm5UADlABhK5+bpy9oAPHBwGBTaAbBcTZZZ8z
S1Wgit9d3gCrJhGlAmK3OWpq5bNC2RKLwEqZO5UK6IaS4aNcfl+NY2IcqJWi+QsF9EK5hdsc/xDa
xihQwzyQXAGc5xeA04dArhmugOW8fSJXQDeUOwL40qSApZctnP0pzpwEfB8HambjnBFwH6vffv0K
8v1bHJ1fYO/wpHDd8qwwI6Bp39fwmtogYnsUqFQVMCOgG8rTptJmFl6L2Pk1zXUnTqvjQC0nTZQS
EG9aR034fhG8OjzB9PyiEOEGWElubikB3VAOBLA5bwFV4ZmLgG/jQHGKj1pKQG9XTiCiQ8ncWh34
SABhb9xX8l4E1IWPoAkHo77iU9+sBVxLB1PuTprRC3x8PE2WFmkXCiXZ+g7nbYYyBR2P5wtes40C
dcddSYCG1wOWifANz3MWC9iVUwi8K7MCu83ah9kCNU/EPOBBOB711R1ApSxkA2bTx9ZdU/3Kgtgl
jZYB8oTsZtlmEy8mUaVp1HUjKxKRB+ED3riRVSklbET4gmcBpaUEd+juyjMh8MZkSpscz318whPh
97ivUjeA3srpPEv4hI8XzFxO1znQJEXMAR5WB5rIjWocKVkEt7KS2MU9dV/rIyV/UMcKVeBsvnE6
1POATR8tDSLcrlX0YD2L0sJm9Wr1yZQO2bHMV4uEqWtarQWc+JjT5qJAu/LVIo8V3UwTJkLghS8w
m3GI8JcEOrUud/VEsQjVlCV45UlAmuCZz3i9rkXwTfUVgc/MpeW2zeqW9iEcLwh0vD5wJCfshZIv
Wddrg+YPUJhtiuaztkBygPiRb+jr/pQ3qWtg2MgjX1bIAjAggnSND/ZzIaCugK0q4JqjkgXyzBm/
o3VA6Ijb56jWXbwQjvmRm/ihW2BCwMQmQG3c1JsAm8nm0edJwDxW1WXM/yo2tUBKjpF3AAAAAElF
TkSuQmCC
EOF
fi

if ! [ -f /tmp/icon-fail.png ] ; then
    base64 -d > /tmp/icon-fail.png <<EOF
iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADNklEQVRoQ+1ZsW4TQRB9k4sDKBdh
voDkC5Ig2W2MLdFQYL4AKOkiIVGiCDoQUjpK4AswEimIZHNpbYmcvyDJHxhhCWLnPGhtX2Kc29vZ
84XgyNt6du69mTc7u2PClC+acvyYEbjsDM4yEGbgV2FtOXAWNhgoEzgLIAvQ2uB39gG0GNQioOIE
nb0bnn+YRvYmzkC7lH8E8OYZWCksRYq23Wr9o3RHlF1iAn3gjC0QlicBAMYhCFtJiVgTGEgl88k+
4iaa7DtB96GttKwItAu5NZ7DNyJSGk99MXOLerjreg1VM6IlJtAu5h6D6L3I66RGzE/cWuODxI2I
gIo8HNqXOEzNJuB1SSaMBJTmT+Yy+xclGx1hJaf5XnfdVBNGAu1Sbj/9gpXmiX232liPs44l8E91
r09FbD0YCOQPpOe8s3oHQfO7KLQ2tqpPuLX6is6xloBN9K89f4H5e/dx/PolTnZ3YkkoO2V/8vUL
jt+8EhFGzKmkJyDUfgg+RBJHIgQf2spJ6GshksDwYnZgCo+SwvW3786ZRZEYBx9u+v3sqUh6TtBZ
iTqRIgnYyEcHbJSExMYULJ2MIgn8LOUrBDwwOh0axAFUJkpm40tSL6N7GPi8VK2Xx/1EEyjmPCLa
kBJQdjoSUT5swSsfzLy3VGsURASSNi8JiSTgB6CjCzm6Bkp5ton+qG0cieTgB19wq/VzeK8ogWLe
B2HVNgsXKiFG063Vh2/sM2RXs4in/hid+kb2P14lFoPOLfL8lqgPKKO2sJAnuszt7vRvsMalKWC1
7/Ku01LwgzasfdSYHjRq6HTbGCEANo8UG1swjtxaXTs8u9pPSptakGTJ2iZG+6Ev41SiP1ZxMj6B
bloDmGADg3+4QXc56uQZdWsk0M/CNA+2QrY2zW2CwA9vzimPFk9JqOGuA++i5KRkQwEKkpGiuAbG
o9nv0nMLlSS31djMMJqLvU7BpHlxJzbJoC8pkPqDQ9QntP4YRwBvSafRqRH4qzZAm9YZYTQB3k4K
PLGEdJEcSCtTYKIymLMEyp6SYjQZ3AJRi5grTq/rmabOJgWkTkD6wbTtRH0g7Y+m6W9GIM1oJvE1
9Rn4A3Pb0EDhonXCAAAAAElFTkSuQmCC
EOF
fi


# TODO: add verbose option to enable the following output which is
# helpful when running this continuously in a *compilation* buffer
echo "--------------------------------------------------------------------------"
echo "execnotify: Starting..."
echo "execnotify: Entering directory '$PWD'"

#clear
$notify_start

# Run the command
$*

# Notify the result
status=$?
if [ $status == 0 ] ; then
    $notify_pass
else
    $notify_fail
fi
